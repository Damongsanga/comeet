# 🌠 개발자들을 위한 모각코 커뮤니티 사이트 COMEET

![COMEET](./doc/COMEET.png)

<hr>

## 📌 서비스 소개

##### 🤔 Why Comeet?

- 왜 스터디를 모집하는 공간과 스터디를 진행하는 공간이 분리되어야할까? 라는 불편함에서 시작하였습니다.
- 더 나아가 함께 지식을 공유하는 개발자들만의 문화를 적극 반영한 온라인 스터디 플랫폼을 구상하게 되었습니다.

##### 🧑‍🤝‍🧑 Easy & Fast Interaction

- 코밋에서는 누구나 들어올 수 있는 방을 일회성으로 생성하여 사람들과 함께 쉽고 빠르게 공부할 수 있습니다.
- 또한 모집 게시판에서 보다 지속적인 스터디를 위해 사적인 방을 만들어 운영할 수도 있습니다.

##### 🔄 Real-Time Study

- 화면 공유를 통해 다른 개발자들의 공부 방법을 쉽게 참고할 수 있습니다.
- 실시간 마크다운 코드 채팅을 통해 즉각적이며 상호적인 스터디를 진행할 수 있습니다.

##### 💻 For Developers

- 코밋은 관심있는 분야, 공부시간이 담긴 메타데이터를 통해 사용자의 기록, 분석한 정보를 제공합니다.
- 또한 공부 성향, TIL을 통해 자신의 스터디 스타일을 표현하고 자신과 잘 맞는 개발자를 찾아 교류할 수 있습니다.

<br/>

## 👩 팀 구성

| [김태수](https://github.com/benyy0101)                                                    | [이유로](https://github.com/rheeeuro)                                                     | [정현아](https://github.com/JHyeon-a)                                                                                          | [김희연](https://github.com/heeyeon3050)                                                   | [정덕주](https://github.com/Damongsanga)                                                   | [김동건](https://github.com/Zerotay)                                                      |
| ----------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------- |
| <img src="https://avatars.githubusercontent.com/u/65917479?v=4" width="150" height="150"> | <img src="https://avatars.githubusercontent.com/u/47638660?v=4" width="150" height="150"> | <img src="https://avatars.githubusercontent.com/u/139304856?v=4cd575a38-8fc4-4470-889b-b920862f2e30" width="150" height="150"> | <img src="https://avatars.githubusercontent.com/u/111184269?v=4" width="150" height="150"> | <img src="https://avatars.githubusercontent.com/u/110401199?v=4" width="150" height="150"> | <img src="https://avatars.githubusercontent.com/u/67823010?v=4" width="150" height="150"> |
| Leader, Front                                                                             | Front, Back                                                                               | Front                                                                                                                          | Back                                                                                       | Back                                                                                       | CI&CD, Front                                                                              |
| 담당 기능                                                                                 | 담당 기능                                                                                 | 담당 기능                                                                                                                      | 담당 기능                                                                                  | 유저 인가.인증                                                                             | 담당 기능                                                                                 |

<br/>

## 🛠️ 기술 스택

**Front**
<br/>
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=black" width="auto" height="25">
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black" width="auto" height="25">
<img src="https://img.shields.io/badge/reactquery-FF4154?style=for-the-badge&logo=reactquery&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/tailwind-06B6D4?style=for-the-badge&logo=tailwindcss&logoColor=white" width="auto" height="25">

**Back**
<br/>
<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/SPRING DATA JPA-6DB33F?style=for-the-badge&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/querydsl-669DF6?style=for-the-badge&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/SPRING SECURITY-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white" width="auto" height="25">

**Database**
<br/>
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/mongodb-4479A1?style=for-the-badge&logo=mongodb&logoColor=white" height="25">
<img src="https://img.shields.io/badge/amazons3-569A31?style=for-the-badge&logo=amazons3&logoColor=white" width="auto" height="25">

**Environment**
<br/>
<img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/EC2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/sonarqube-4E9BCD?style=for-the-badge&logo=sonarqube&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/prometheus-E6522C?style=for-the-badge&logo=prometheus&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/grafana-F46800?style=for-the-badge&logo=grafana&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/openvidu-F46800?style=for-the-badge&logoColor=white" width="auto" height="25">

**Cooperation**
<br/>
<img src="https://img.shields.io/badge/gitlab-FC6D26?style=for-the-badge&logo=gitlab&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/jira-0052CC?style=for-the-badge&logo=jira&logoColor=white" width="auto" height="25">
<img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white" width="auto" height="25">

<br/>

## 🌐 Setting

#### 1. 개발 환경 (Version)

- Front

  - React : 18.2.0

- Back
  - Java : `coretto-17`
  - SpringBoot : `3.2.1, Gradle, Jar`
  - IntelliJ : `2021.2.4 IU-212.5712.43 December 21, 2021`
  - MySQL : `8.2`
  - MySQL workbench : `8.0.21`

#### 2. 주요 setting

- React
    <details>
    <summary>.env</summary>
    <div markdown="1">
      
    ```
    REACT_APP_API_SERVER_URL = https://i10a506.p.ssafy.io/api
    REACT_APP_WEBSOCKET_SERVER_URL = https://i10a506.p.ssafy.io:8443/
    REACT_APP_SECRETKEY = {YOUR SECRET KEY}
    ```
    </div>
    </details>

- Spring Boot

    <details>
    <summary>application.yml</summary>
    <div markdown="1">

  ```
  spring:
    profiles:
      include: secret

    datasource:
      url: jdbc:mysql://127.0.0.1:3306/comeet?serverTimezone=UTC
      username: {username}
      password: {password}
      driver-class-name: com.mysql.cj.jdbc.Driver

    jpa:
      hibernate:
        ddl-auto: update
      properties:
        hibernate:
          format_sql: true
          dialect: org.hibernate.dialect.MySQL8Dialect
          default_batch_fetch_size:

    jwt:
      header: Authorization
      secret: {your secret SSL Encryption, create by `openssl rand -base64 60`}
      access-token-validity-in-seconds : 7200
      refresh-token-validity-in-seconds : 86400

    data:
      redis:
        host: localhost
        port: 6379
      mongodb:
        uri: {yourMongoDBURI}

    security:
      oauth2:
        client:
          registration:
            github:
              client-id: {your github client Id}
              client-secret: {your github client secret}
            password-salt: {your password-salt. create your own random value}

    servlet:
      multipart:
        max-file-size: -1
        max-request-size: -1

  logging.level:
    org.hibernate.SQL: debug

  aes:
    secret-key: {your aes128 encryption secret key. create your own random value}

  cloud:
    aws:
      s3:
        bucket: {your bucket}
      credentials:
        access-key: {your access-key}
        secret-key: {your secret-key}
      region:
        static: ap-northeast-2 # 한국 서버
        auto: false
      stack:
        auto: false

  ```

    </div>
    </details>

#### 3. 빌드 및 실행

- Front
  ```
  npm install -f && CI=false npm run build
  cp -rf  build /var/jenkins_home/settings
  ```
  ```
  serve -s /settings/build
  ```
- Back

  ```
  gradlew clean bootJar
  ```

  ```
  java -jar comeet-0.0.1-SNAPSHOT.jar
  ```

#### 4. 배포

<details>
    <summary>Nginx setting</summary>
    <div markdown="1">

```
upstream ssafy {
    server {your web application server for dev};
}
upstream ssaf {
    server {your web application server for deploy};
}

server {
    server_name localhost;
    listen 80;
    listen [::]:80;

    location / {
        proxy_pass {your web server};
    }
}
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    root /var/www/html;
    # Add index.php to the list if you are using PHP
    index index.html index.htm index.nginx-debiain.html;
    location / {
        try_files $uri $uri/ =404;
    }
}


server {
#    index index.html index.htm index.nginx-debian.html;
    server_name {your domain name}; # managed by Certbot


    location / {
        proxy_pass {your web server};
    }
        location /api {



        rewrite ^/api/(.*)$ /$1 break;
        proxy_pass http://ssafy;
        proxy_pass_request_headers on;
    }
    location /api2 {
        rewrite ^/api2/(.*)$ /$1 break;
        proxy_pass http://ssaf;
        proxy_pass_request_headers on;
    }

    listen [::]:443 ssl ipv6only=on; # managed by Certbot
    listen 443 ssl; # managed by Certbot
    ssl_certificate {your full chain pem}; # managed by Certbot
    ssl_certificate_key {your private key pem}; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}
server {
    if ($host = {your domain name}) {
        return 308 https://$host$request_uri;
    }  # managed by Certbot
    if ($host = localhost) {
        return 301 http://$host:3002$request_uri;
    }


    listen 80 ;
    listen [::]:80 ;
    server_name {your domain name}
    return 404; # managed by Certbot


}
```

</div>
</details>

<br/>

## 🎨 아키텍처

<img width="1000" alt="image" src="./doc/Comeet_Architecture.png
">

## 💡 주요 기능

### 1. 로그인 & 소셜 로그인

![로그인](./doc/1.로그인.gif)

- 서비스 자체 회원가입 or 깃헙 소셜 로그인 기능

### 2. 방 생성 및 검색

![방생성](./doc/2.방생성.gif)

- 일회용 방, 지속성 방 설정하여 생성
- 일회용 방은 누구나 들어와서 공부할 수 있으며 지속방은 가입된 인원만 입장 가능

![모집게시판생성](./doc/2.모집게시판생성.gif)

- 지속 방인 경우 방장의 가입 승인이 필요
- 스터디원을 모집하기 위한 모집 게시판을 통해 가입 요청 가능

![방게시판조회](./doc/5.방게시판조회.gif)

- 방 및 게시판 필터링 검색 & 정렬 조건 지정

### 3. 방 가입 요청 및 승인

![가입요청](./doc/6.가입요청.gif)

- 다른 유저들이 모집 게시판에서 원하는 방의 모집게시판에서 가입 신청
- 가입 신청시 방장에게 쪽지 자동 발신

![가입승인](./doc/6.가입승인.gif)

- 방장이 받은 가입 요청 쪽지를 통해 승인하여 방에 가입시킬 수 있음

### 4. 채팅 & 공유채팅

![채팅과공유채팅](./doc/3.채팅과공유채팅.gif)

- **라운지**
  - 방 내의 라운지에서 일반 채팅을 진행 가능
  - 라운지를 다양한 주제에 대해 이야기를 나눌 수 있음
- **채널**
  - 역시 여러 채널을 만들어 주제별로 화면 공유를 진행할 수 있음
- **채널 내 공유 편집기능**
  - 여러 사용자가 동시에 편집
  - 언어를 지정하여 가독성을 높힐 수 있음
  - 편집 내용을 불러내어 채팅에 마크다운 형태로 입력 가능

### 5. 채널 내 캠 & 화면공유

![캠과필터](./doc/4.캠과필터.gif)

- 캠 & 화면 공유 가능
- 다양한 필터 적용

### 6. 마이페이지

![마이페이지](./doc/7.마이페이지.gif)

- 사용자의 선호하는 공부 성향 지정
- 방 이용 메타데이터를 분석하여 제공
  - 관심있는 키워드
  - 주요 공부 시간대
  - 오늘, 최근 일주일, 최근 한달간 공부 시간
- TIL 작성 및 조회 기능
- 팔로잉 팔로우 기능

<br/>

## 📄 문서

#### 1. ERD

![ERD](./doc/ERD.png)

#### [2. 요구 사항 명세서](https://satin-turkey-70b.notion.site/d8936d52d8b34c3fa1ae3326b29426b8?pvs=4)

![Requirement](./doc/Requirement.png)

#### [3. API 명세서](https://satin-turkey-70b.notion.site/API-75586b08754643c3b8c514174477d506?pvs=4)

![API](./doc/API.png)

#### [4. 스터디](https://satin-turkey-70b.notion.site/16e7dd0673a44db6b94d53347d6714f5?pvs=4)

<br/>
